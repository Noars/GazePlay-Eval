<div class="d-flex justify-content-center align-items-start bg-light-subtle p-4">
  <div class="card shadow-lg w-100" style="max-width: 600px;">
    <div class="card-header text-center">
      <h3 class="mb-0">Paramètres globaux évaluation manuelle</h3>
    </div>
    <div class="card-body">
      <div class="accordion mt-4" id="globalParamsAccordion">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingStimuli">
            <button class="accordion-button" type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseStimuli"
                    aria-expanded="true"
                    aria-controls="collapseStimuli">
              Écrans de stimuli
            </button>
          </h2>
          <div id="collapseStimuli" class="accordion-collapse collapse show"
               aria-labelledby="headingStimuli"
               data-bs-parent="#globalParamsAccordion">
            <div class="accordion-body">
              <div class="mb-4">
                <label class="form-label fw-semibold">Taille de la grille ?</label>
                <div class="row g-3 align-items-center">
                  <div class="col-4">
                    <label for="nbRows" class="col-form-label">Nombre de lignes</label>
                  </div>
                  <div class="col-4">
                    <input type="number" id="nbRows" class="form-control" min="1" step="1" aria-describedby="nbRowsInfo"
                           [(ngModel)]="globalStimuliInfos[0]">
                  </div>
                  <div class="col-4">
                      <span id="nbRowsInfo" class="form-text fw-semibold">
                        Minimum 1 !
                      </span>
                  </div>
                </div>
                <div class="row g-3 align-items-center">
                  <div class="col-4">
                    <label for="nbCols" class="col-form-label">Nombre de colonnes</label>
                  </div>
                  <div class="col-4">
                    <input type="number" id="nbCols" class="form-control" min="1" step="1" aria-describedby="nbColsInfo"
                           [(ngModel)]="globalStimuliInfos[1]">
                  </div>
                  <div class="col-4">
                      <span id="nbColsInfo" class="form-text fw-semibold">
                        Minimum 1 !
                      </span>
                  </div>
                </div>
              </div>
              <br>
              <div class="mb-4">
                <label class="form-label fw-semibold">Temps maximum par écran ?</label>
                <div class="d-flex justify-content-center align-items-center gap-4">
                  <label class="col-form-label">
                    Mettre un temps maximum par écran ?
                  </label>
                  <div class="form-check mb-0">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="timeScreenYes"
                      (change)="globalStimuliInfos[2] = 'true'"
                      [checked]="globalStimuliInfos[2] === 'true'"
                    />
                    <label class="form-check-label" for="timeScreenYes">Oui</label>
                  </div>
                  <div class="form-check mb-0">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="timeScreenNo"
                      (change)="globalStimuliInfos[2] = 'false'"
                      [checked]="globalStimuliInfos[2] === 'false'"
                    />
                    <label class="form-check-label" for="timeScreenNo">Non</label>
                  </div>
                </div>
                @if (globalStimuliInfos[2] === 'true') {
                  <div class="row g-3 align-items-center justify-content-center">
                    <div class="col-auto">
                      <input type="number" id="maxTimeScreen" class="form-control" min="1" step="1"
                             aria-describedby="maxTimeScreenInfo" [(ngModel)]="globalStimuliInfos[3]">
                    </div>
                    <div class="col-auto">
                      <span id="nbFixationLengthInfo" class="form-text fw-semibold">
                        La durée est en secondes !
                      </span>
                    </div>
                  </div>
                }
              </div>
              <br>
              <div class="mb-4">
                <label class="form-label fw-semibold">Durée de fixation pour validation ?</label>
                <div class="row g-3 align-items-center justify-content-center">
                  <div class="col-auto">
                    <input type="number" id="nbFixationLength" class="form-control" min="0.1" step="0.1"
                           aria-describedby="nbFixationLengthInfo" [(ngModel)]="globalStimuliInfos[4]">
                  </div>
                  <div class="col-auto">
                      <span id="nbFixationLengthInfo" class="form-text fw-semibold">
                        La durée est en secondes !
                      </span>
                  </div>
                </div>
              </div>
              <br>
              <div class="mb-4">
                <label class="form-label fw-semibold">Nombre de stimuli a valider pour passage a l'écran suivant
                  ?</label>
                <div class="row g-3 align-items-center justify-content-center">
                  <div class="col-auto">
                    <input type="number" id="nbStimuli" class="form-control" min="1"
                           [max]="Number(globalStimuliInfos[0]) * Number(globalStimuliInfos[1])" step="1"
                           aria-describedby="nbStimuliInfo" [(ngModel)]="globalStimuliInfos[5]">
                  </div>
                  <div class="col-auto">
                      <span id="nbStimuliInfo" class="form-text fw-semibold">
                        Maximum nombre de lignes * nombre de colonnes ({{ Number(globalStimuliInfos[0]) * Number(globalStimuliInfos[1]) }}
                        ) !
                      </span>
                  </div>
                </div>
              </div>
              <br>
              <div class="mb-4">
                <label class="form-label fw-semibold">Qu’est-ce qu’il se passe si le stimuli est validé ?</label>
                <div class="d-flex justify-content-center align-items-center gap-4">
                  <label class="col-form-label">Désactivation de celui-ci ?</label>
                  <div class="form-check mb-0">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="disableStimuliYes"
                      (change)="globalStimuliInfos[6] = 'true'"
                      [checked]="globalStimuliInfos[6] === 'true'"
                    />
                    <label class="form-check-label" for="disableStimuliYes">Oui</label>
                  </div>
                  <div class="form-check mb-0">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="disableStimuliNo"
                      (change)="globalStimuliInfos[6] = 'false'"
                      [checked]="globalStimuliInfos[6] === 'false'"
                    />
                    <label class="form-check-label" for="disableStimuliNo">Non</label>
                  </div>
                </div>
              </div>
              <br>
              <div class="mb-4">
                <label class="form-label fw-semibold">Emplacement stimuli ?</label>
                <div class="d-flex justify-content-center align-items-center gap-4">
                  <label class="col-form-label">
                    Placer les stimuli aléatoirement ?
                  </label>
                  <div class="form-check mb-0">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="randomStimuliYes"
                      (change)="globalStimuliInfos[7] = 'true'"
                      [checked]="globalStimuliInfos[7] === 'true'"
                    />
                    <label class="form-check-label" for="randomStimuliYes">Oui</label>
                  </div>
                  <div class="form-check mb-0">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="randomStimuliNo"
                      (change)="globalStimuliInfos[7] = 'false'"
                      [checked]="globalStimuliInfos[7] === 'false'"
                    />
                    <label class="form-check-label" for="randomStimuliNo">Non</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-center align-items-start mt-4">
        <button class="btn btn-primary" (click)="startCreateEvalManual()">
          Commencer la création manuelle de l'évaluation
        </button>
      </div>
      <div class="d-flex justify-content-between mt-4">
        <button class="btn btn-primary" (click)="backToEvalChoice()">
          ← Retour
        </button>
      </div>
    </div>
  </div>
</div>
